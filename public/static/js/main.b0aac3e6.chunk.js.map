{"version":3,"sources":["components/header/header.js","tools/index.js","components/audio/audio.js","components/loading/loading.js","components/list/list.js","components/lyric/lyric.js","components/pic/pic.js","components/canvas/canvas.js","App.js","store/index.js","index.js"],"names":["HeaderUI","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","handleGoHistory","bind","assertThisInitialized","_react_16_6_3_react_default","a","createElement","id","props","isMusicBack","onTouchStart","musicName","window","history","go","Component","Header","connect","state","isMusicPlay","dispatch","getSessionStorage","key","sessionStorage","getItem","AudioUI","handlePlayBtn","className","ref","src","musicId","songUrl","musicBarDrag","pathName","playMusic","pauseMusic","refs","audioPlay","style","backgroundImage","audio","play","playingRun","handleMusicOver","timers","setInterval","clearInterval","timer","pause","small","document","getElementsByClassName","getAttribute","paused","handleMusicPlay","animationPlayState","audioNow","audioCurrentTime","audioBar","scale","currentTime","duration","left","parentNode","offsetWidth","width","handleLocalLyric","getElementById","top","songList","JSON","parse","i","length","mid","handleNextSong","handleSongUrl","url","setAttribute","nextSong","handleMusicId","handleMusicName","title","console","log","ontouchstart","ev","disX","_this2","touch","changedTouches","pageX","offsetLeft","ontouchmove","L","toFixed","err","ontouchend","Audio","overTime","bool","type","payload","num","data","name","Loading","ListUI","handleMove","handleEnd","list","isLoading","map","item","index","onTouchMove","onTouchEnd","author","loading_loading","_this3","location","pathname","replace","$0","handlePathName","handleBack","setState","axios","get","then","res","value","Code","stringify","Body","setItem","isMove","push","handleNusicPlay","listName","filter","List","musicData","allMusicData","LyricUI","isActive","js","xi","pervMid","localLyric","lyric","formatLyric","playLyric","pauseLyric","handleNoIt","_this4","result","$1","$2","time","formatTimeToSec","split","parseFloat","lyricRuning","_this5","lyricList","lyricUl","children","sum","j","offsetHeight","This","setTimeout","Lyric","PicUI","handleGoLyric","alt","match","params","Pic","Canvas","re","App","BrowserRouter","header_header","canvas_canvas","Switch","Route","path","component","Redirect","from","to","audio_audio","reducer","combineReducers","arguments","undefined","action","ovarTime","store","createStore","__REDUX_DEVTOOLS_EXTENSION__","ReactDOM","render","es","src_App_0"],"mappings":"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","file":"static/js/main.b0aac3e6.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport './header.css';\r\nimport {NavLink} from 'react-router-dom'\r\nimport {connect} from 'react-redux'\r\n\r\nclass HeaderUI extends Component {\r\n\tconstructor(){\r\n\t\tsuper();\r\n\t\tthis.handleGoHistory=this.handleGoHistory.bind(this);\r\n\t}\r\n  render() {\r\n    return (\r\n      <div id=\"musicHeader\">\r\n\t\t\t{this.props.isMusicBack && <a  onTouchStart={this.handleGoHistory}>&lt;</a> }{this.props.musicName}\r\n\t  </div>\r\n    );\r\n  }\r\n  componentDidMount(){\r\n\r\n  }\r\n  handleGoHistory(){\r\n  \twindow.history.go(-1);\r\n  \t// to={this.props.historyInfo}\r\n  // \tif(this.props.pathName===\"lyric\"){\r\n  // \t\tthis.props.handleHistoryInfo('/pic/'+this.props.musicId);\r\n  // \t}else if(this.props.pathName===\"pic\"){\r\n\t\t// this.props.handleHistoryInfo('/list');\r\n  // \t}\r\n  \t\r\n  }\r\n  \r\n}\r\nfunction mapStateToProps(state){\r\n\treturn{\r\n\t\t\t//获取数据\r\n\t\t\tisMusicBack:state.isMusicBack,\r\n\t\t\tmusicName:state.musicName,\r\n\t\t\tisMusicPlay:state.isMusicPlay\r\n\t\t\t// pathName:state.pathName,\r\n\t\t\t// musicId:state.musicId\r\n\t\t\t// historyInfo:state.historyInfo\r\n\t}\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch){\r\n\treturn{\r\n\t\t// handleHistoryInfo(data){\r\n\t\t// \tdispatch({type:'HISTORY_INFO',payload:data})\r\n\t\t// }\r\n\t}\r\n}\r\n\r\nvar Header=connect(mapStateToProps,mapDispatchToProps)(HeaderUI)\r\n\r\nexport default Header;\r\n","function setSessionStorage(key , value) {\r\n\twindow.sessionStorage.setItem(key,value);\r\n}\r\n\r\nfunction getSessionStorage(key){\r\n\treturn window.sessionStorage.getItem(key);\r\n}\r\n\r\nexport{\r\n\tsetSessionStorage,\r\n\tgetSessionStorage\r\n}","import React, { Component } from 'react';\r\nimport './audio.css';\r\nimport axios from 'axios'\r\nimport {getSessionStorage,setSessionStorage} from '../../tools/index.js'\r\nimport {connect} from 'react-redux'\r\nclass AudioUI extends Component {\r\n\tconstructor(){\r\n\t\tsuper();\r\n\t\tthis.handlePlayBtn=this.handlePlayBtn.bind(this);\r\n\t}\r\n  render() {\r\n    return (\r\n      <div id=\"musicAudio\">\r\n\t\t\t<div className=\"audioPlay\" ref=\"audioPlay\" onTouchStart={this.handlePlayBtn}></div>\r\n\t\t\t<div className=\"audioProgress\" ref=\"audioProgress\">\r\n\t\t\t\t<div className=\"audioBar\" ref=\"audioBar\"></div>\r\n\t\t\t\t<div className=\"audioNow\" ref=\"audioNow\"></div>\r\n\t\t\t</div>\r\n\t\t\t<audio  ref=\"audio\" src={this.props.musicId &&this.props.songUrl} id=\"audio\"></audio>\r\n\t\t\t{/*<audio  ref=\"audio\" src={this.props.musicId &&this.props.songUrl} id=\"audio\"></audio>*/}\r\n\t\t\t</div>\r\n    );\r\n  }\r\n  componentDidMount(){\r\n  \tthis.musicBarDrag();\r\n  }\r\n  componentDidUpdate(){\r\n\tif(this.props.pathName===\"pic\"){\r\n\t\tif(this.props.isMusicPlay){\r\n\t\t\tthis.playMusic();\r\n\t\t}else{\r\n\t\t\tthis.pauseMusic();\r\n\t\t}\r\n\t}\r\n  }\r\n  playMusic(){\r\n\tthis.refs.audioPlay.style.backgroundImage=\"url(/images/list_audioPause.png)\";\r\n\tthis.refs.audio.play();\r\n\tthis.playingRun();\r\n\tthis.props.handleMusicOver(-1);\r\n\tthis.timers = setInterval(this.playingRun.bind(this),1000);\r\n\tclearInterval(this.timer);\r\n  }\r\n  pauseMusic(){\r\n\tthis.refs.audioPlay.style.backgroundImage=\"url(/images/list_audioPlay.png)\";\r\n  \tthis.refs.audio.pause();\r\n  \tclearInterval(this.timers);\r\n  }\r\n  handlePlayBtn(){\r\n  \tvar small=document.getElementsByClassName(\"small\")[0];\r\n  \tif(this.refs.audio.getAttribute(\"src\")===\"\"){\r\n\t\treturn;\r\n  \t}\r\n  \tif(this.refs.audio.paused){\r\n\t\tthis.playMusic();\r\n\t\tthis.props.handleMusicPlay(true);\r\n\t\tif(this.props.pathName===\"pic\"){\r\n\t\t\tsmall.style.animationPlayState=\"running\";\r\n\t\t}\r\n\t\t\r\n  \t}else{\r\n  \t\t// console.log(this.history)\r\n  \t\tif(this.props.pathName===\"pic\"){\r\n\t\t\tsmall.style.animationPlayState=\"paused\";\r\n\t\t}\r\n  \t\tthis.pauseMusic();\r\n  \t\tthis.props.handleMusicPlay(false);\r\n  \t}\r\n  }\r\n  playingRun(){\r\n  \t//监听进度条\r\n\tvar audioNow=this.refs.audioNow;\r\n  \tvar audioCurrentTime=this.refs.audio;\r\n  \tvar audioBar=this.refs.audioBar;\r\n  \tvar scale=audioCurrentTime.currentTime/audioCurrentTime.duration;\r\n  \taudioBar.style.left=scale*audioBar.parentNode.offsetWidth-7+'px';\r\n  \taudioNow.style.width=(scale*100)+\"%\";\r\n\t\r\n\t//播放结束后执行的代码\r\n  \tif(scale===1){\r\n  \t\tthis.props.handleMusicPlay(false);\r\n  \t\tthis.pauseMusic();\r\n  \t\tthis.props.handleLocalLyric(\"\");\r\n  \t\taudioNow.style.width=(0)+\"%\";\r\n  \t\taudioBar.style.left='-7px';\r\n  \t\tif(this.props.pathName===\"lyric\"){\r\n\t\t\tdocument.getElementById(\"lyricUl\").style.top=\"0px\";\r\n  \t\t}\r\n  \t\tvar songList=JSON.parse(getSessionStorage('songList'));\r\n  \t\tfor(var i=0;i<songList.length;i++){\r\n\t\t\tif(songList[i].mid===this.props.musicId){\r\n\t\t\t\t//将得到的内容存到状态管理中去\r\n\t\t\t\tthis.props.handleNextSong(songList[i+1]);\r\n\t\t\t\tthis.props.handleSongUrl(songList[i+1].url)\r\n\t\t\t\t//播放第二首歌曲\r\n\t\t\t\tthis.refs.audio.setAttribute(\"src\",this.props.nextSong.url);\r\n\t\t\t\tthis.props.handleMusicId(this.props.nextSong.mid);\r\n\t\t\t\tthis.props.handleMusicName(this.props.nextSong.title);\r\n\t\t\t\t// this.props.handleMusicPlay(true);\r\n\t\t\t\tif(this.refs.audio.paused){\r\n\t\t\t\t\tconsole.log(1)\r\n\t\t\t\t\tthis.props.handleMusicPlay(true);\r\n\t\t\t\t\tthis.playMusic();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n  \t\t}\r\n  \t}\r\n  }\r\n   musicBarDrag(){\r\n  \t//拖拽\r\n  \tvar audioNow=this.refs.audioNow;\r\n  \tvar audioCurrentTime=this.refs.audio;\r\n  \tvar audioBar=this.refs.audioBar;\r\n\taudioBar.ontouchstart=function(ev){\r\n\t\tvar disX=0;\r\n\t\tvar touch=ev.changedTouches[0];\r\n\t\tdisX=touch.pageX-this.offsetLeft;\r\n\t\tdocument.ontouchmove=(ev)=>{\r\n\t\t\tvar touch=ev.changedTouches[0];\r\n\t\t\tvar L=touch.pageX-disX;\r\n\t\t\tif(L<-7){\r\n\t\t\t\tL=-7;\r\n\t\t\t}else if(L>this.parentNode.offsetWidth-7){\r\n\t\t\t\tL=this.parentNode.offsetWidth-7;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.style.left=L+'px';\r\n\t\t\ttry{\r\n\t\t\t\tvar scale=(L+7)/this.parentNode.offsetWidth;\r\n\t\t\t\taudioNow.style.width=(scale*100).toFixed(2)+'%';\r\n\t\t\t\taudioCurrentTime.currentTime=scale*audioCurrentTime.duration;\r\n\t\t\t}catch(err){\r\n\t\t\t\tconsole.log(err)\r\n\t\t\t}\r\n\t\t\t\r\n\t\t};\r\n\t\tdocument.ontouchend=function(){\r\n\t\t\tdocument.ontouchmove=document.ontouchend=null;\r\n\t\t}\r\n\t\treturn false;\r\n\t\t//audio.currentTime当前播放时间\r\n\t\t//audio.duration播放总时间\r\n\t}\r\n  }\r\n }\r\nfunction mapStateToProps(state){\r\n\treturn{\r\n\t\tmusicId:state.musicId,\r\n\t\tisMusicPlay:state.isMusicPlay,\r\n\t\tpathName:state.pathName,\r\n\t\toverTime:state.overTime,\r\n\t\tnextSong:state.nextSong,\r\n\t\tsongUrl:state.songUrl\r\n\t}\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch){\r\n\treturn{\r\n\t\thandleMusicPlay(bool){\r\n\t\t\tdispatch({type:\"IS_MUSIC_PLAY\",payload:bool})\r\n\t\t},\r\n\t\thandleMusicOver(num){\r\n\t\t\tdispatch({type:'OVER_TIME',payload:num})\r\n\t\t},\r\n\t\thandleNextSong(data){\r\n\t\t\tdispatch({type:\"NEXT_SONG\",payload:data})\r\n\t\t},\r\n\t\thandleMusicId(mid){\r\n\t\t\tdispatch({type:'MUSIC_ID',payload:mid})\r\n\t\t},\r\n\t\thandleMusicName(name){\r\n\t\t\tdispatch({type:\"MUSIC_NAME\",payload:name})\r\n\t\t},\r\n\t\thandleLocalLyric(data){\r\n\t\t\tdispatch({type:\"LOCAL_LYRIC\",payload:data})\r\n\t\t},\r\n\t\thandleSongUrl(url){\r\n\t\t\tdispatch({type:\"SONG_URL\",payload:url})\r\n\t\t}\r\n\t}\r\n}\r\n\r\nvar Audio=connect(mapStateToProps,mapDispatchToProps)(AudioUI)\r\n\r\nexport default Audio;\r\n","import React , { Component } from 'react';\r\nimport './loading.css';\r\n\r\nclass Loading extends Component {\r\n\trender(){\r\n\t\treturn (\r\n\t\t\t<div className=\"loader\"></div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Loading;","import React, { Component } from 'react';\r\nimport './list.css';\r\nimport axios from 'axios'\r\nimport {connect} from 'react-redux'\r\nimport {setSessionStorage,getSessionStorage} from '../../tools/index.js'\r\nimport Loading from '../loading/loading.js'\r\nclass ListUI extends Component {\r\n\tconstructor(){\r\n\t\tsuper();\r\n\t\tthis.handleMove=this.handleMove.bind(this);\r\n\t\tthis.handleEnd=this.handleEnd.bind(this);\r\n\t\tthis.state={\r\n\t\t\tlist:[11111,222222],\r\n\t\t\tisLoading:false\r\n\t\t}\r\n\t}\r\n  render() {\r\n    return (\r\n      <div id=\"musicList\">\r\n\t\t\t\r\n\t\t\t{\r\n\t\t\t\tthis.state.isLoading?<ul>\r\n\t\t\t\t\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.state.list.map((item,index)=>{\r\n\t\t\t\t\t\treturn <li className={this.props.musicId===item.mid ? 'active' : ''} key={item.mid}>\r\n\t\t\t\t\t\t\t<div onTouchMove={this.handleMove}  onTouchEnd={()=>this.handleEnd(item.mid)}>\r\n\t\t\t\t\t\t\t\t<div className=\"listOrder\">{index+1}</div>\r\n\t\t\t\t\t\t\t\t<div className=\"listName\">\r\n\t\t\t\t\t\t\t\t\t<h3>{item.title}</h3>\r\n\t\t\t\t\t\t\t\t\t<p>{item.author}</p>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t</ul>:<Loading />\r\n\t\t}\r\n\t\t</div>\r\n    );\r\n  }\r\n  componentDidMount(){\r\n  \tvar pathname=this.props.location.pathname;\r\n  \tvar reg=/[^\\/]+/;\r\n  \tpathname.replace(reg,($0)=>{\r\n\t\tthis.props.handlePathName($0);\r\n  \t})\r\n\t//设置header的箭头\r\n  \tthis.props.handleBack(false);\r\n  \tvar data=getSessionStorage(\"songList\");\r\n\tif(data){\r\n\t\tthis.setState({\r\n\t\t\tlist:JSON.parse(data),\r\n\t\t\tisLoading:true\r\n\t\t})\r\n\t}else{\r\n\t\taxios.get('/music/api/?key=523077333&id=3641614987&type=songlist&cache=1&size=hq').then((res)=>{\r\n\t\t// console.log(res.Code===\"OK\")\r\n\t\t\tif(res.data.Code==='OK'){\r\n\t\t\t\tsetSessionStorage('songList',JSON.stringify(res.data.Body));\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tlist:res.data.Body,\r\n\t\t\t\t\tisLoading:true\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t  \t})\t\r\n\t /*axios.get('/users/lists').then((res)=>{\r\n\t \tconsole.log(res)\r\n\t\t// console.log(res.Code===\"OK\")\r\n\t\t\tif(res.data.Code==='OK'){\r\n\t\t\t\tsetSessionStorage('songList',JSON.stringify(res.data.Body));\r\n\t\t\t\tconsole.log(res.data.Body)\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tlist:res.data.Body,\r\n\t\t\t\t\tisLoading:true\r\n\t\t\t\t},()=>{\r\n\t\t\t\t\tconsole.log(1,this.state.list);\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t  \t})\t*/\r\n\t}\r\n  }\r\n  handleMove(){\r\n\t\tthis.isMove=true;\r\n  }\r\n  handleEnd(mid){\r\n  \tif(this.isMove){\r\n\t\tthis.isMove=false;\r\n  \t}else{\r\n  \t\t// this.props.history.push('lyric/'+mid);\r\n  \t\tthis.props.history.push('pic/'+mid);\r\n  \t\tthis.props.handleBack(true);\r\n  \t\tthis.props.handleMusicId(mid);\r\n  \t\tthis.props.handleNusicPlay(true);\r\n  \t\tvar listName=this.state.list.filter((item)=>{\r\n  \t\t\tif(item.mid===mid){\r\n\t\t\t\treturn item\r\n  \t\t\t}\r\n  \t\t})\r\n  \t\tthis.props.handleMusicName(listName[0].title);\r\n  \t\tthis.props.handleSongUrl(listName[0].url);\r\n  \t\t\r\n  \t}\r\n\t\t\r\n  \t}\r\n  }\r\nfunction mapStateToProps(state){\r\n\treturn{\r\n\t\t\t//获取数据\r\n\t\t\tmusicData:state.allMusicData,\r\n\t\t\tmusicId:state.musicId\r\n\t}\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch){\r\n\treturn{\r\n\t\t//设置数据\r\n\t\thandleBack(bool){\r\n\t\t\tdispatch({type:'IS_MUSIC_BACK',payload:bool})\r\n\t\t},\r\n\t\thandleMusicId(mid){\r\n\t\t\tdispatch({type:'MUSIC_ID',payload:mid})\r\n\t\t},\r\n\t\thandleNusicPlay(bool){\r\n\t\t\tdispatch({type:'IS_MUSIC_PLAY',payload:bool})\r\n\t\t},\r\n\t\thandleMusicName(name){\r\n\t\t\tdispatch({type:\"MUSIC_NAME\",payload:name})\r\n\t\t},\r\n\t\thandlePathName(data){\r\n\t\t\tdispatch({type:\"PATH_NAME\",payload:data})\r\n\t\t},\r\n\t\thandleSongUrl(url){\r\n\t\t\tdispatch({type:\"SONG_URL\",payload:url})\r\n\t\t}\r\n\t}\r\n}\r\n\r\nvar List=connect(mapStateToProps,mapDispatchToProps)(ListUI)\r\n\r\nexport default List;\r\n","import React, { Component } from 'react';\r\nimport './lyric.css';\r\nimport axios from 'axios'\r\nimport {connect} from 'react-redux'\r\nclass LyricUI extends Component {\r\n\tconstructor(){\r\n\t\tsuper();\r\n\t\tthis.state={\r\n\t\t\tisActive:-1,\r\n\t\t\tjs:0,\r\n\t\t\txi:-1,\r\n\t\t\tpervMid:\"\"\r\n\t\t}\r\n\t\t\r\n\t}\r\n  render() {\r\n    return (\r\n      <div id=\"musicLyric\">\r\n\t\t<ul ref=\"lyricUl\" id=\"lyricUl\">\r\n\t\t\t{/*<li>歌词测试文字</li>\r\n            <li className=\"active\">歌词测试文字</li>\r\n            <li>歌词测试文字</li>\r\n            <li>歌词测试文字</li>\r\n        \t*/}\r\n        \t{\r\n        \t\tthis.props.localLyric && this.props.localLyric.map((item,index)=>{\r\n\t\t\t\t\treturn <li id=\"lyli\" className={this.state.isActive===index ? 'active' : ''}  key={index}>{item.lyric}</li>\r\n        \t\t})\r\n        \t}\r\n\t\t</ul>\r\n\t\t\r\n\t</div>\r\n    );\r\n  }\r\n  componentDidMount(){\r\n  \tvar pathname=this.props.location.pathname;\r\n  \tvar reg=/[^\\/]+/;\r\n  \tpathname.replace(reg,($0)=>{\r\n\t\tthis.props.handlePathName($0);\r\n  \t})\r\n  \tthis.props.handleBack(true);\r\n  \tvar mid=this.props.musicId;\r\n  \taxios.get('/music/api/?key=523077333&cache=1&type=lrc&id='+mid).then((res)=>{\r\n\t\tthis.props.handleLocalLyric(this.formatLyric(res.data));\r\n\t\tif(this.props.isMusicPlay){\r\n\t\t\tthis.playLyric();\r\n\t\t}else{\r\n\t\t\tthis.pauseLyric();\r\n\t\t}\r\n\t})\t\r\n\t/*axios.get('/users/lyric/'+mid).then((res)=>{\r\n\t\tthis.props.handleLocalLyric(this.formatLyric(res.data));\r\n\t\tif(this.props.isMusicPlay){\r\n\t\t\tthis.playLyric();\r\n\t\t}else{\r\n\t\t\tthis.pauseLyric();\r\n\t\t}\r\n\t})*/\t\r\n  }\r\n  componentDidUpdate(){\r\n\tthis.handleNoIt(this.props.musicId);\r\n  }\r\n   componentWillUnmount(){\r\n  \tthis.pauseLyric(this.props.musicId);\r\n  }\r\n  formatLyric(data){\r\n\tvar result = [];\r\n\tvar reg=/\\[([^\\]]+)\\]([^\\[]+)/g;\r\n\tdata.replace(reg,($0,$1,$2)=>{\r\n\t\tresult.push({time:this.formatTimeToSec($1),lyric:$2})\r\n\t})\r\n\treturn result;\r\n  }\r\n  formatTimeToSec(time){\r\n\t//将时间转换为分钟形式\r\n\tvar result=time.split(\":\");\r\n\treturn (parseFloat(result[0]*60)+parseFloat(result[1])).toFixed(2)\r\n  }\r\n  playLyric(){\r\n  \tthis.props.handleMusicOver(-1)\r\n  \tthis.lyricRuning();\r\n\tthis.timer=setInterval(this.lyricRuning.bind(this),500);\r\n  }\r\n  pauseLyric(){\r\n\tclearInterval(this.timer)\r\n  }\r\n  handleNoIt(mid){\r\n\t\tif(mid!==this.state.pervMid){\r\n\t\t\taxios.get('/music/api/?key=523077333&cache=1&type=lrc&id='+mid).then((res)=>{\r\n\t\t\t\tthis.props.handleLocalLyric(this.formatLyric(res.data));\r\n\t\t\t\tif(this.props.isMusicPlay){\r\n\t\t\t\t\tthis.playLyric();\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.pauseLyric();\r\n\t\t\t\t}\r\n\t\t\t})\t\r\n\t\t\tthis.setState({\r\n\t\t\t\tpervMid:mid\r\n\t\t\t})\r\n\t\t}\r\n  }\r\n  lyricRuning(){\r\n\t//先是获取当前的歌词\r\n\t//然后是获取音频播放时间\r\n\ttry{\r\n\tvar lyricList=this.props.localLyric;\r\n\tvar audio=document.getElementById('audio');\r\n\tvar lyricUl=this.refs.lyricUl;\r\n\tvar num=lyricUl.children.length;\r\n\tfor(var i=0;i<lyricList.length;i++){\r\n\t\t\t\tif(audio.currentTime > lyricList[i].time && audio.currentTime < lyricList[i+1].time){\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tisActive:i\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tif(this.state.xi!=i){\r\n\t\t\t\t\t\tvar sum=0;\r\n\t\t\t\t\t\tfor(var j=0;j<=i;j++){\r\n\t\t\t\t\t\t\tsum+=lyricUl.children[j].offsetHeight\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlyricUl.style.top=-(sum)+'px';\r\n\t\t\t\t\t\tif(lyricList.length-2===i){\r\n\t\t\t\t\t\t\tvar This=this;\r\n\t\t\t\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\t\t\t\tThis.pauseLyric();\r\n\t\t\t\t\t\t\t\tThis.setState({\r\n\t\t\t\t\t\t\t\t\tisActive:lyricList.length-1\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t},500)\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}catch(err){\r\n\t\t\t\r\n\t\t}\r\n\r\n  }\r\n }\r\nfunction mapStateToProps(state){\r\n\treturn{\r\n\t\t\tisMusicPlay:state.isMusicPlay,\r\n\t\t\tmusicId:state.musicId,\r\n\t\t\tlocalLyric:state.localLyric,\r\n\t\t\tpathName:state.pathName\r\n\t}\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch){\r\n\treturn{\r\n\t\t//设置数据\r\n\t\thandleBack(bool){\r\n\t\t\tdispatch({type:'IS_MUSIC_BACK',payload:bool})\r\n\t\t},\r\n\t\thandlePathName(data){\r\n\t\t\tdispatch({type:\"PATH_NAME\",payload:data})\r\n\t\t},\r\n\t\thandleMusicOver(num){\r\n\t\t\tdispatch({type:'OVER_TIME',payload:num})\r\n\t\t},\r\n\t\thandleLocalLyric(data){\r\n\t\t\tdispatch({type:\"LOCAL_LYRIC\",payload:data})\r\n\t\t}\r\n\t}\r\n}\r\n\r\nvar Lyric=connect(mapStateToProps,mapDispatchToProps)(LyricUI)\r\n\r\nexport default Lyric;\r\n","import React, { Component } from 'react';\r\nimport './pic.css';\r\n// import {NavLink} from 'react-router-dom'\r\nimport axios from 'axios'\r\nimport {connect} from 'react-redux'\r\n\r\nclass PicUI extends Component {\r\n\tconstructor(){\r\n\t\tsuper();\r\n\t\tthis.handleGoLyric=this.handleGoLyric.bind(this);\r\n\t\t\r\n\t}\r\n  render() {\r\n    return (\r\n      <div id=\"pic\">\r\n\t\t\t<div className=\"big\">\r\n\t\t\t\t<div className=\"small\" ref=\"small\">\r\n\t\t\t\t\t<div className=\"circle\">\r\n\t\t\t\t\t\t<img src={\"https://api.mlwei.com/music/api/?key=523077333&cache=1&type=pic&id=\"+this.props.musicId} alt=\"\"/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"lyric\" onTouchStart={this.handleGoLyric}>词</div>\r\n\t  </div>\r\n    );\r\n  }\r\n  componentDidMount(){\r\n  \tvar pathname=this.props.location.pathname;\r\n  \tvar reg=/[^\\/]+/;\r\n  \tpathname.replace(reg,($0)=>{\r\n\t\tthis.props.handlePathName($0);\r\n  \t})\r\n\tthis.props.handleBack(true);\r\n\t// this.refs.small.style.animation:circleMove  10s linear infinite;\r\n\r\n  }\r\n  handleGoLyric(){\r\n  \tvar mid=this.props.match.params.mid;\r\n\tthis.props.history.push('/lyric/'+mid);\r\n  }\r\n}\r\nfunction mapStateToProps(state){\r\n\treturn{\r\n\t\t\tisMusicPlay:state.isMusicPlay,\r\n\t\t\tmusicId:state.musicId\r\n\t}\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch){\r\n\treturn{\r\n\t\thandleBack(bool){\r\n\t\t\tdispatch({type:'IS_MUSIC_BACK',payload:bool})\r\n\t\t},\r\n\t\thandlePathName(data){\r\n\t\t\tdispatch({type:\"PATH_NAME\",payload:data})\r\n\t\t}\r\n\t}\r\n}\r\n\r\nvar Pic=connect(mapStateToProps,mapDispatchToProps)(PicUI)\r\n\r\nexport default Pic;\r\n","import React, { Component } from 'react';\r\nimport './canvas.css';\r\nclass Canvas extends Component {\r\n  constructor(){\r\n    super();\r\n    this.state={\r\n      list:[]\r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n      <div className=\"container\">\r\n       {\r\n            this.state.list.map((item,index)=>{\r\n              return <div className=\"circle-container\" key={index}>\r\n                      <div className=\"circle\"></div>\r\n                    </div>\r\n            })\r\n\r\n       }\r\n      </div>\r\n    );\r\n  }\r\n  componentDidMount(){\r\n    var re=[];\r\n    for(var i=0;i<100;i++){\r\n      re.push(i);\r\n    }\r\n    this.setState({\r\n      list:re\r\n    })\r\n  }\r\n  \r\n}\r\nexport default Canvas;\r\n\r\n","import React, { Component } from 'react';\nimport {BrowserRouter as Router,Route,Redirect,Switch} from 'react-router-dom'\nimport './App.css';\nimport Header from './components/header/header.js'\nimport Audio from './components/audio/audio.js'\nimport List from './components/list/list.js'\nimport Lyric from './components/lyric/lyric.js'\nimport Pic from './components/pic/pic.js'\nimport Canvas from './components/canvas/canvas.js'\nclass App extends Component {\n  render() {\n    return (\n      <Router>\n      <div className=\"App\">\n          <Header />\n          <Canvas/>\n              <Switch>\n              <Route path='/list' component={List}></Route>\n              <Route path='/pic/:mid' component={Pic}></Route>\n              <Route path='/lyric/:mid' component={Lyric}></Route>\n              <Redirect from='*' to=\"/list\" />\n              </Switch>\n           \n          <Audio />\n      </div>\n      </Router>\n    );\n  }\n}\n\nexport default App;\n","import {createStore,combineReducers} from 'redux'\r\n\r\nfunction isMusicBackReducer(state=false,action) {\r\n\tif(action.type==='IS_MUSIC_BACK'){\r\n\t\treturn action.payload\r\n\t}else{\r\n\t\treturn state\r\n\t}\r\n}\r\n\r\nfunction musicIdReducer(state=\"\",action) {\r\n\tif(action.type==='MUSIC_ID'){\r\n\t\treturn action.payload\r\n\t}else{\r\n\t\treturn state\r\n\t}\r\n}\r\n\r\nfunction isMusicPlayReducer(state=false,action) {\r\n\tif(action.type==='IS_MUSIC_PLAY'){\r\n\t\treturn action.payload\r\n\t}else{\r\n\t\treturn state\r\n\t}\r\n}\r\n\r\nfunction musicNameReducer(state=\"巅峰榜 · 热歌\",action) {\r\n\tif(action.type==='MUSIC_NAME'){\r\n\t\treturn action.payload\r\n\t}else{\r\n\t\treturn state\r\n\t}\r\n}\r\n\r\nfunction pathNameReducer(state=\"\",action) {\r\n\tif(action.type==='PATH_NAME'){\r\n\t\treturn action.payload\r\n\t}else{\r\n\t\treturn state\r\n\t}\r\n}\r\n\r\nfunction ovarTimeReducer(state=-1,action) {\r\n\tif(action.type==='OVER_TIME'){\r\n\t\treturn action.payload\r\n\t}else{\r\n\t\treturn state\r\n\t}\r\n}\r\n\r\nfunction nextSongReducer(state=\"\",action) {\r\n\tif(action.type==='NEXT_SONG'){\r\n\t\treturn action.payload\r\n\t}else{\r\n\t\treturn state\r\n\t}\r\n}\r\n\r\nfunction localLyricReducer(state=\"\",action) {\r\n\tif(action.type==='LOCAL_LYRIC'){\r\n\t\treturn action.payload\r\n\t}else{\r\n\t\treturn state\r\n\t}\r\n}\r\n\r\nfunction songUrlReducer(state=\"\",action) {\r\n\tif(action.type==='SONG_URL'){\r\n\t\treturn action.payload\r\n\t}else{\r\n\t\treturn state\r\n\t}\r\n}\r\n\r\nvar reducer=combineReducers({\r\n\tisMusicBack:isMusicBackReducer,//返回按钮\r\n\tmusicId:musicIdReducer,//控制每首歌曲的id\r\n\tisMusicPlay:isMusicPlayReducer,//控制音乐是否播放\r\n\tmusicName:musicNameReducer,//控制音乐名称\r\n\tpathName:pathNameReducer,//控制路径名称\r\n\tovarTime:ovarTimeReducer,//控制定时器是否关闭\r\n\tnextSong:nextSongReducer,//存储下一条歌曲内容,\r\n\tlocalLyric:localLyricReducer,//存储每一次的当前播放的歌曲的歌词,\r\n\tsongUrl:songUrlReducer//存储每一首歌\r\n})\r\n\r\nvar store=createStore(reducer, window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__())\r\n\r\nexport default store","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport {Provider} from 'react-redux'\nimport store from './store/index.js'\nReactDOM.render(<Provider store={store}><App /></Provider>, document.getElementById('root'));\n"],"sourceRoot":""}